# Copilot Instructions for Bethmas Care Center Next.js Project

## Project Overview

This is a Next.js 15 project for Bethmas Care Center Abuja, a special education and behavioral intervention center. The project uses TypeScript, Tailwind CSS, and follows modern Next.js best practices with the App Router.

## Project Structure

```
bethmascarecenter/
├── src/
│   ├── app/                 # App Router pages and layouts
│   ├── components/          # Reusable React components
│   ├── lib/                 # Utility functions and configurations
│   ├── hooks/               # Custom React hooks
│   ├── types/               # TypeScript type definitions
│   ├── styles/              # Additional CSS/SCSS files
│   └── utils/               # Helper functions
├── public/                  # Static assets
│   ├── images/              # Image assets (renamed sequentially)
│   └── icons/               # Icon assets
├── docs/                    # Documentation files
└── tests/                   # Test files
```

## Technology Stack

- **Framework:** Next.js 15 with App Router
- **Language:** TypeScript
- **Styling:** Tailwind CSS
- **UI Components:** shadcn/ui
- **Database ORM:** Prisma
- **Authentication:** NextAuth.js (Auth.js)
- **Package Manager:** npm/yarn/pnpm
- **Node Version:** 18.18.0 or higher (required for Next.js 15)

## Documentation Requirements

**IMPORTANT:** Always reference and follow the official documentation:

- **Next.js 15 Documentation:** Use the latest Next.js 15 documentation for all framework-related decisions
- **shadcn/ui Documentation:** Always use shadcn/ui components and patterns as documented on ui.shadcn.com
- **Prisma Documentation:** Follow Prisma best practices for database schema design, migrations, and queries
- **NextAuth.js Documentation:** Use NextAuth.js (Auth.js) patterns for authentication and session management
- When implementing features, first check these official docs before suggesting alternatives
- Prefer official examples and patterns over custom implementations

## Coding Standards and Best Practices

### 1. File Naming Conventions

- **Components:** PascalCase (e.g., `UserProfile.tsx`, `ServiceCard.tsx`)
- **Pages:** lowercase with hyphens (e.g., `about-us`, `contact`)
- **Utilities:** camelCase (e.g., `formatDate.ts`, `apiHelpers.ts`)
- **Types:** PascalCase with `.types.ts` suffix (e.g., `User.types.ts`)
- **Constants:** UPPER_SNAKE_CASE in `constants.ts` files

### 2. Component Structure

```typescript
// Use this structure for React components
import React from "react";
import { ComponentProps } from "./ComponentName.types";

interface ComponentNameProps {
  // Define props here
}

const ComponentName: React.FC<ComponentNameProps> = (
  {
    // destructure props
  }
) => {
  // Component logic here

  return <div className="component-container">{/* JSX content */}</div>;
};

export default ComponentName;
```

### 3. TypeScript Guidelines

- Always use TypeScript for all files
- Define interfaces for all props and complex objects
- Use strict type checking
- Prefer `interface` over `type` for object definitions
- Use generic types where appropriate
- Export types from dedicated `.types.ts` files

### 4. Styling Guidelines

- Use Tailwind CSS for all styling
- Follow mobile-first responsive design principles
- Use semantic class names when custom CSS is needed
- Implement consistent spacing using Tailwind's spacing scale
- Use CSS Grid and Flexbox for layouts
- Maintain accessibility standards (WCAG 2.1 AA)

### 5. Special Education Context

This project serves children with:

- Autism Spectrum Disorder (ASD)
- ADHD
- Learning Disabilities (LD)
- Specific Learning Disabilities (SLD)

**Accessibility Requirements:**

- High contrast color schemes
- Large, clear fonts (minimum 16px)
- Simple, intuitive navigation
- Screen reader compatibility
- Keyboard navigation support
- Sensory-friendly design options

## Component Guidelines

### 1. Page Components

- Use Server Components by default
- Add `'use client'` only when client-side features are needed
- Implement proper metadata for SEO
- Use `loading.tsx` and `error.tsx` for better UX

### 2. UI Components

- Keep components small and focused on single responsibility
- Use compound component patterns for complex UI elements
- Implement proper prop validation with TypeScript
- Include accessibility attributes (ARIA labels, roles)

### 3. Layout Components

- Create reusable layout components
- Implement responsive navigation
- Use semantic HTML elements
- Ensure proper heading hierarchy (h1 → h6)

## API and Data Handling

### 1. Database with Prisma

- Use Prisma as the primary ORM for all database operations
- Define models in `prisma/schema.prisma` following Prisma conventions
- Use Prisma Client for type-safe database queries
- Implement database migrations using `prisma migrate`
- Use Prisma Studio for database inspection and debugging
- Follow Prisma naming conventions (camelCase for fields, PascalCase for models)
- Implement proper relations between models
- Use Prisma's built-in validation and constraints

### 2. Authentication with NextAuth.js

- Use NextAuth.js (Auth.js) for all authentication needs
- Configure providers in `src/app/api/auth/[...nextauth]/route.ts`
- Implement proper session management using NextAuth sessions
- Use `getServerSession()` for server-side authentication checks
- Implement proper middleware for route protection
- Follow NextAuth.js patterns for custom sign-in pages
- Use NextAuth.js database adapters with Prisma
- Implement proper CSRF protection through NextAuth.js

### 3. API Routes

- Use App Router API routes in `src/app/api/`
- Implement proper error handling
- Use TypeScript for request/response types
- Follow RESTful conventions
- Implement rate limiting where necessary
- Protect API routes with NextAuth.js middleware

### 2. Data Fetching

- Use Server Components for initial data loading
- Use Prisma Client for all database queries
- Implement proper loading states
- Handle errors gracefully
- Use `unstable_cache` for caching when appropriate
- Follow Prisma query patterns for optimal performance
- Use Prisma's `select` and `include` for efficient data fetching

## Testing Guidelines

- Write unit tests for utility functions
- Create integration tests for critical user flows
- Test accessibility features
- Use Jest and React Testing Library
- Maintain minimum 80% code coverage for critical features

## Performance Best Practices

### 1. Images

- Use Next.js `Image` component for all images
- Optimize images for web (WebP format preferred)
- Implement proper alt text for accessibility
- Use appropriate sizing and lazy loading

### 2. Code Splitting

- Use dynamic imports for large components
- Implement route-based code splitting
- Lazy load non-critical features

### 3. SEO Optimization

- Implement proper metadata in all pages
- Use structured data for better search visibility
- Optimize for Core Web Vitals
- Implement proper Open Graph tags

## Special Education Features

### 1. User Experience

- Simple, intuitive interfaces
- Clear visual hierarchies
- Consistent navigation patterns
- Reduced cognitive load
- Calming color schemes

### 2. Content Guidelines

- Use clear, simple language
- Provide visual cues and icons
- Implement progress indicators
- Offer multiple ways to access information
- Include audio/visual alternatives

### 3. Parent/Caregiver Features

- Easy appointment scheduling
- Progress tracking dashboards
- Resource libraries
- Communication tools with staff
- Mobile-responsive design

## Security Considerations

- Protect sensitive student information (FERPA compliance)
- Implement proper authentication and authorization
- Use environment variables for sensitive data
- Validate all user inputs
- Implement CSRF protection
- Regular security audits

## Common Patterns to Follow

### 1. Database Operations with Prisma

```typescript
// Use Prisma Client for database operations
import { prisma } from "@/lib/prisma";

// Example query with proper error handling
async function getUser(id: string) {
  try {
    const user = await prisma.user.findUnique({
      where: { id },
      select: {
        id: true,
        name: true,
        email: true,
        // Only select fields you need
      },
    });
    return user;
  } catch (error) {
    console.error("Error fetching user:", error);
    throw new Error("Failed to fetch user");
  }
}
```

### 2. Authentication with NextAuth.js

```typescript
// Server-side authentication check
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";

export async function GET() {
  const session = await getServerSession(authOptions);

  if (!session) {
    return new Response("Unauthorized", { status: 401 });
  }

  // Continue with authenticated logic
}
```

### 3. Client-side Session Usage

```typescript
// Client component session usage
"use client";
import { useSession } from "next-auth/react";

export function UserProfile() {
  const { data: session, status } = useSession();

  if (status === "loading") return <div>Loading...</div>;
  if (status === "unauthenticated") return <div>Please sign in</div>;

  return <div>Welcome, {session?.user?.name}!</div>;
}
```

### 4. Error Boundaries

```typescript
// Implement error boundaries for better error handling
import { ErrorBoundary } from "react-error-boundary";

function ErrorFallback({ error }) {
  return (
    <div role="alert" className="error-container">
      <h2>Something went wrong:</h2>
      <pre>{error.message}</pre>
    </div>
  );
}
```

### 5. Loading States

```typescript
// Use consistent loading patterns
const LoadingSpinner = () => (
  <div className="flex justify-center items-center p-4">
    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" />
  </div>
);
```

### 6. Form Handling

- Use React Hook Form for complex forms
- Implement proper validation
- Provide clear error messages
- Ensure forms are accessible

## Environment Variables

```env
# Database (Prisma)
DATABASE_URL="your_database_connection_string"

# NextAuth.js
NEXTAUTH_SECRET="your_nextauth_secret"
NEXTAUTH_URL="http://localhost:3000" # Update for production

# OAuth Providers (if using)
GOOGLE_CLIENT_ID="your_google_client_id"
GOOGLE_CLIENT_SECRET="your_google_client_secret"

# Application
NEXT_PUBLIC_SITE_URL=https://bethmascarecenter.com
```

## Deployment Guidelines

- Use Vercel for hosting (recommended for Next.js)
- Implement proper CI/CD pipelines
- Use environment-specific configurations
- Monitor performance and errors post-deployment
- Implement proper backup strategies

## Documentation Requirements

- Document all custom hooks and utilities
- Maintain component documentation with examples
- Keep README.md updated with setup instructions
- Document API endpoints and data models
- Maintain changelog for version tracking

## Accessibility Checklist

- [ ] Proper heading structure (h1-h6)
- [ ] Alt text for all images
- [ ] ARIA labels for interactive elements
- [ ] Keyboard navigation support
- [ ] Color contrast compliance (WCAG AA)
- [ ] Screen reader compatibility
- [ ] Focus management
- [ ] Skip navigation links

## Code Review Guidelines

- Check TypeScript compliance
- Verify accessibility standards
- Ensure responsive design
- Review performance implications
- Validate security practices
- Confirm code organization follows project structure

## Resources and References

**Primary Documentation (Always Reference First):**

- [Next.js 15 Documentation](https://nextjs.org/docs/) - **PRIMARY REFERENCE for all Next.js features**
- [shadcn/ui Documentation](https://ui.shadcn.com/docs/installation/next/) - **PRIMARY REFERENCE for UI components**
- [Prisma Documentation](https://www.prisma.io/docs) - **PRIMARY REFERENCE for database operations**
- [NextAuth.js Documentation](https://authjs.dev/) - **PRIMARY REFERENCE for authentication**

**Additional Resources:**

- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [React Accessibility Guidelines](https://reactjs.org/docs/accessibility.html)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [TypeScript Best Practices](https://typescript-eslint.io/rules/)
- [Prisma Best Practices](https://www.prisma.io/docs/guides/performance-and-optimization)
- [NextAuth.js Guides](https://authjs.dev/getting-started/introduction)

---

**Note:** Always prioritize accessibility and user experience, especially considering the special needs of our target audience. When in doubt, choose the solution that provides the best experience for children with disabilities and their families.
